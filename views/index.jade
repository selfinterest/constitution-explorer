doctype 5
html(lang="en", ng-app="ConstitutionExplorer")
    head
        title Constitution Explorer!
        != css("/lib/bootstrap/less/bootstrap.css")
        != css("styles.css")
        script(src="/socket.io/socket.io.js")
        != js("/lib/jquery/jquery.min.js")
        //!= js("https://ajax.googleapis.com/ajax/libs/angularjs/1.1.5/angular.min.js")
        //!= js("/lib/angular/angular.min.js")
        //!= js("https://ajax.googleapis.com/ajax/libs/angularjs/1.2.0rc1/angular.min.js")
        != js("https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js")
        != js("/lib/angular-bootstrap/ui-bootstrap-tpls.min.js")
        != js("/lib/underscore/underscore-min.js")
        != js("/lib/angular-socket-io/socket.js")
        != js("services.js")
        != js("controllers.js")
        != js("filters.js")
        != js("main.js")
        script.
            angular.module("ConstitutionExplorer").value("user", {admin: '#{admin}'});
    body
        div.navbar
            div.navbar-inner
                a(href="/").brand PrimaryDocuments.ca - Constitution Explorer
                ul.nav
                    li(ng-class="{'active': activeRoute == 'editor'}"): a(href="/editor" ) Editor
                    li(ng-class="{'active': activeRoute == 'viewer'}"): a(href="/viewer") Viewer
                    li(ng-class="{'active': activeRoute == 'users'}"): a(href="/users") Users
        div(ng-switch on="activeRoute").container-fluid
            div(ng-switch-when='editor').row-fluid
                div(ng-controller="NavCtrl").span2.well
                    span(ng-show="!connection.on") Socket NOT connected
                    ul.nav.nav-list
                        li(nav-menu2).nav-header
                            span.pull-right.icons
                                i(ng-click="menu.minimizeSection(section)").icon-minus
                                i(ng-click="wire.delete(section)", ng-show="user.admin").icon-remove
                            | {{section.name}}
                    div.input-append
                        form
                            label Add part
                            input(type="text", ng-model="newSection", placeholder="New part", ng-change="validateNewSection()").input-small//)//, placeholder="New section", tooltip-placement="bottom", tooltip="You can add a new section here", tooltip-animation="true", tooltip-trigger="focus").input-small
                            button(ng-click="wire.put(newSection)", ng-disabled="!newSectionValid").btn Submit
                div.span10
                    div(ng-view).border-bottom
                    div(ng-include src="'/templates/finder'", ng-controller="FinderCtrl", ng-show="menu.activeId")
            div(ng-switch-when='viewer').row-fluid
                div(ng-view)


